<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="../css/shopcar.css"/>
		 <!--最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	</head>
	<body>
		<!--首页右侧黑条-->
		<div id = "rightcell">
			<ul>
				<li><a href="login.html">登录</a></li>
				<li><a href="">看过</a></li>
				<li><a href="">喜欢</a></li>
				<li><a href="">购物车</a></li>
				<span style = "color : white">
					<i>0</i>
				</span>
				<li><a href="">客服</a></li>
			</ul>
		</div>
		<!--topcell-->
		<div id = "top">
			<div id = "top1">
				<a href="">手机客户端</a>
				<div id = "top2">
				<span>您好，欢迎光临包包树商城！</span>
				<a href="login.html">[登录]</a>
				<a href="register.html">[注册]</a>
				<a href="">查询订单</a>
				<span>会员中心&nbsp;
				<div class = "jiantou"></div>
				</span>
				<span>
					<em></em>
					<a href="">购物车&nbsp;<i>0</i></a>
				</span>
				</div>
			</div>
		</div>
		<!--top-->
		<div id = "dtt">
			<div id = "tt">
				<div id = "lefttt">
					<img src="../img/logo.png" alt="">
					<span>
					<p>
						<input type="text"> 
					</p>
					<p>
						热门搜索词 ：
						<a href="">双11提前抢</a>
						<a href="">热销</a>
						<a href="">真皮女包</a>
						<a href="">pu女包</a>
						<a href="">男包</a>        
					</p></span>
				</div>
				<div id = "righttt">
				</div>
			</div>
		</div>
		<!--nav-->
		<div id = "nav">
			<div id = "nav1">
				<a href="" class = "t">全部商品分类</a>
				<span>
				<a href=""  class = "vary">首页</a>
				<a href="">真皮女包</a>
				<a href="">萌趣女包</a>
				<a href="">轻潮男包</a>
				<a href="">品牌特卖</a>
				<a href="">全部商品</a>
				</span>
			</div>
		</div>
		<!--listgoods-->
		<div id = "syy">
			<ul>
				
			</ul>
		</div>
		<!--分页-->
		<nav aria-label="Page navigation " style = "margin : 0 auto;text-align : center">
		  <ul class="pagination">
			<li>
			  <a href="#" aria-label="Previous">
				<span aria-hidden="true">&laquo;</span>
			  </a>
			</li>
			<li><a href="#">1</a></li>
			<li><a href="#">2</a></li>
			<li><a href="#">3</a></li>
			<li><a href="#">4</a></li>
			<li><a href="#">5</a></li>
			<li>
			  <a href="#" aria-label="Next">
				<span aria-hidden="true">&raquo;</span>
			  </a>
			</li>
		  </ul>
		</nav>
		<!--bottom-->
		<div id="bottom1">
			<div id="bottomtop">
				<dl>
					<dt>关于品牌</dd>
					<dd>品牌概述</dd>
					<dd>企业环境</dd>
					<dd>用户口碑</dd>
					<dd>正品保障</dd>
				</dl>
				
				<dl>
					<dt>关于品牌</dd>
					<dd>品牌概述</dd>
					<dd>企业环境</dd>
					<dd>用户口碑</dd>
					<dd>正品保障</dd>
				</dl>
				<dl>
					<dt>关于品牌</dd>
					<dd>品牌概述</dd>
					<dd>企业环境</dd>
					<dd>用户口碑</dd>
					<dd>正品保障</dd>
				</dl>
				<dl>
					<dt>关于品牌</dd>
					<dd>品牌概述</dd>
					<dd>企业环境</dd>
					<dd>用户口碑</dd>
					<dd>正品保障</dd>
				</dl>
				<dl>
					<dt>关于品牌</dd>
					<dd>品牌概述</dd>
					<dd>企业环境</dd>
					<dd>用户口碑</dd>
					<dd>正品保障</dd>
				</dl>
				<div id="weixin">
					<img src="../img/Sweep_gf_app.jpg" >
				</div>
			</div>
			<p>
				<img src="../img/ensure_icon.gif" style = "display : block;">
			</p>
			<div id="bottombtn">
				<ol>
					<li>关于包包树</li>
					<li>合作加盟</li>
					<li>诚聘英才</li>
					<li style = "border-right : none;">网站地图</li>
				</ol>
				<p> © 2005-2018 包包树官方商城，并保留所有权利。      ICP备案证书号: 粤ICP备09002529号-1</p>
				<p>女包,包包,包包品牌,真皮女包,包包团购,新款女包,2015包包,包包树官方商城</p>
				<div id="imges">
					<img src="../img/gzaic.png" >
					<img src="../img/360_ico.gif" >
					<img src="../img/gzaic.png" >
					<img src="../img/360_ico.gif" >
				</div>
				<div id="gongan">
					<img src="../img/police_beian.png"  style = "float : left; display :block;">
					<p style = "float : left;height : 20px;line-height : 20px;padding-left : 5px;">粤公网安备 44011102000009号</p>
				</div>
				<p style = " float : left;">
					友情链接：
					<a href = "" style = " color :#707070;">360购物导航</a>
					<a href = "" style = " color :#707070;">360购物导航</a>
					<a href = "" style = " color :#707070;">360购物导航</a>
					<a href = "" style = " color :#707070;">360购物导航</a>
				</p>
			</div>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="http://apps.bdimg.com/libs/jquery.cookie/1.4.1/jquery.cookie.js"></script>
		<script type="text/javascript">
			function ShopCar(){		
							this.num = 0;
			}
			$.extend(ShopCar.prototype,{
				//难点
				init : function (){
					this.loadimg().done(
						$.proxy(function (res){
							this.renderpage(res.data.list)
						},this)
					)
					this.handelevent()
					//console.log(this.num)
				},
				loadimg : function (){
					// 错误
					return $.ajax({ url: "http://mce.meilishuo.com/jsonp/get/3?offset=0&frame=0&trace=0&limit=10&endId=0&pid=106888&_=1526369583128", 
							dataType : "jsonp",					
									});	
				},
				renderpage : function (a){					
					//console.log(a)
					//console.log(this.index)
										// this.arr = [];
					for (var i = 0 ;i < a.length ; i ++) {
						//this.index = i;
						//this.arr.push[i];
						this.ele = $('<li class = "nice"></li>');
						this.img = $('<img class = "bet">');
						this.pr = $("<p>" + a[i].price + "￥</p>");
						this.biao = a[i].title.length >= 20 ?  a[i].title.substring(0,20) + "..." : a[i].title;
												this.btt = $('<button>加入购物车</button>');
						this.img.attr({
								"src" : a[i].image,
						})
						this.btt.attr({
							"date-id" : i,
						})
						this.ele.append(this.img,this.biao,this.pr,this.btt)
						$("#syy>ul").append(this.ele);	 
						// return this.index;
					}
				},
				handelevent : function (){
						that = this
					$("ul").on("click","button",function (evt){
								var v1 = $(evt.target).attr("date-id");
						if(this.number == undefined){
							this.number = 1 ;
						}else{
							this.number ++;
						}
						//console.log(v1)
						that.num ++;
						$("i").text(that.num);
						//$.cookie('duantongtong', location.href);
						if($.cookie('ShopCar') == undefined){
							//console.log(1)
							$.cookie("ShopCar",`[{"id":${v1},"num":${this.number}}]`)
						}
							else{
							var sta = false;
							var json = JSON.parse($.cookie("ShopCar"))
							for(var j = 0; j < json.length ; j ++){
								if(json[j].id == v1){
									json[j].num ++;
									sta = true;
									
							}
						}
						if(sta == false){
							var sd = {
										id : v1,
										num : 1
									}
									json.push(sd)
						}
						$.cookie("ShopCar",JSON.stringify(json));
					}
					//console.log(json)
				})
				}
			})
			new ShopCar().init();
		</script>
	</body>
</html>